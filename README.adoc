= Norske epitafier

Dette repoet inneholder katalogdata for «Norske epitafier 1537–1700» som XML-filer,
samt script for å konvertere postene til Dublin Core og laste dem opp til Alma Digital.

Hver katalogpost har en mappe med navn tilsvarende postens katalogkode,
som består av stiftsnavn og et løpenummer, f.eks. "bergen-01".
Hver mappe inneholder en `metadata.xml`-fil og én eller flere bildefiler.

		src/
				bergen-01/
						metadata.xml
						bilde 1.jpg
						bilde 2.jpg
						biografi.jpg
				...

XML-filene følger skjemaet definert i `epitafium.rnc` ([RELAX NG Compact](https://relaxng.org/compact-20021121.html)).

For import til Alma, konverteres filene til ved hjelp av XSLT-filen `scripts/dc_record.xsl` til en Dublin Core applikasjonsprofil
definert i Alma (http://alma.exlibrisgroup.com/dc/47BIBSYS_UBO). Denne er i liten grad kompatibel med andre skjemaer,
og blander dessuten inn presentasjonselementer, så den er mest en pragmatisk løsning for å få dataene inn i Alma Digital.

== Dataelementer

Definisjon av felter som brukes i XML-versjonen av katalogen, og hvilke felter disse skal korrespondere med i DC application profile 1 i UBOs katalog.

Feltene i Alma Digital konfigureres i ExLibris Alma under `Alma Configuration > Resources > Cataloging > Metadata Configuration > DC application profile 1`

Språkvalg for skjemaet:
engelske felt/egenskaper og norske etiketter/labels. [utviklingsønske: etiketter på flere språk]

Felter som er i bruk for denne samlingen (pr 23.04.2020):

=== Tittel
[cols="35s,65", stripes=odd]
|===
|URI | dc:title
|Beskrivelse | Generert standardtekst på formen «Norske epitafier 1537–1700: {Epitafium over} ({Opprinnelig plassering})»
|PNX | `Display/title` og `Search/title`
|===

=== Katalogkode
[cols="35s,65", stripes=odd]
|===
|URI | :catalogCode
|Underegenskap av | dc:identifier
|Beskrivelse |
|PNX | `Search/addsrcrecordid`?
|===

=== Epitafium over (skjult fordi feltet inngår i tittel)
[cols="35s,65", stripes=odd]
|===
|URI | :epitaphOn
|Beskrivelse | Person(er) som epitafiet er til minne over. Eksempel: «Christen Jensen (Sorenskriver) og hustru Gye Lauridtzdatter, med barn»
|PNX | - (søkbar via tittel)
|===

=== Opprinnelig plassering
[cols="35s,65", stripes=odd]
|===
|URI | :originalLocation
|Underegenskap av | dc:spatial
|Beskrivelse | Kirke epitafiet opprinnelig var plassert i.
|PNX | Evt. `Display/description` med fortekst?
|===

=== Plassering
[cols="35s,65", stripes=odd]
|===
|URI | :location
|Underegenskap av | dc:spatial
|Beskrivelse | Nåværende plassering, typisk navn på et museum eller en kirke
|PNX | `Search/general`. Evt. `Display/description` med fortekst?
|===

=== Dato
[cols="35s,65", stripes=odd]
|===
|URI | dc:date
|Beskrivelse | Datering (omtrentlig eller eksakt) for når epitafiet ble fremstilt. Omtrentlige verdier kan f.eks. ha formen «1590-tallet» og «ca. 1630».
|PNX| `Display/creationdate` og `Search/creationdate`
|===

=== Stift (skjult fordi det fremkommer av katalognummer)
[cols="35s,65", stripes=odd]
|===
|URI | :diocese
|Beskrivelse | Historisk stift, slik de så ut rundt ca. 1700. Fire mulige verdier: «Bergen», «Oslo/Christiania», «Stavanger» eller «Trondhjem».
|PNX| Evt. `Display/description` med fortekst?
|===

=== Utformet av
[cols="35s,65", stripes=odd]
|===
|URI | :artist
|Underegenskap av | dc:creator
|Beskrivelse | Person(er) som har fremstilt epitafiet. Ofte ukjent. Feltet kan ha komplekse verdier som «X har stått for utskjæringene, Y har malt bildet.» og «Antagelig utformet av X.»
|PNX | `Display/creator` og `Search/creator`
|===

=== Innskrifter
[cols="35s,65", stripes=odd]
|===
|URI | :inscriptions
|Beskrivelse | Feltet inneholder alle innskrifter, samt overskrifter. Er html-formatert med avsnitt pga. manglende formateringsmuligheter i visning.
|PNX | `Search/general`. Evt. `Display/description` med fortekst?
|===

=== Merknader
[cols="35s,65", stripes=odd]
|===
|URI | :notes
|Beskrivelse | (Fylles inn)
|PNX | `Search/general`. Evt. `Display/description` med fortekst?
|===

=== Beskrivelse
[cols="35s,65", stripes=odd]
|===
|URI | dc:description
|Beskrivelse | Fysisk beskrivelse av epitafiet. Eks: ...
|PNX | `Search/general`. Evt. `Display/description` med fortekst?
|===

=== Referanser
[cols="35s,65", stripes=odd]
|===
|URI | dcterms:bibliographicCitation
|Beskrivelse | Referanser til omtale av epitafiet.
|PNX | Evt. `Display/description` med fortekst?
|===

=== Rettigheter (?)
[cols="35s,65", stripes=odd]
|===
|URI | dc:rights
|Beskrivelse | (Ikke avklart helt enda. Vi har rettighetsinformasjon på både tekst og foto)
|PNX | `Display/rights`
|===

=== Kilde (?)
[cols="35s,65", stripes=odd]
|===
|URI | dcterms:source
|Beskrivelse | Standardtekst som går igjen på alle epitafiene. Eksempel: ..
|PNX | `Display/source`?
|===

=== Identifikator (skjult)
[cols="35s,65", stripes=odd]
|===
|URI | dc:identifier
|Beskrivelse | Per i dag flere funksjoner: Intern Alma-ID (MMS-ID), filnavn ved ingest (veldig rar løsning).
|PNX | –
|===



== Konvertering

=== Oppsett

Hent inn avhengigheter med pipenv:

	pipenv install

Opprett en konfigurasjonsfil:

	cp config.yml.dist config.yml

og legg nøkler for Alma og S3 her.

=== Konvertere

For å konvertere poster fra lokalt XML-format til Dublin Core:

	python -m scripts.process

=== Synkronisere ID-er

Når postene har blitt importert i Alma bør man hente ned ID-ene som har blitt generert for postene:

	python -m scripts.fetch_ids

Disse lagres i fila `alma_ids.json`.
